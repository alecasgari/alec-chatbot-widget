<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alec ChatBot Widget - All Integration Methods Test</title>
    <link rel="stylesheet" href="https://chat.alecasgari.com/widget.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            padding: 60px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            margin: 20px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        
        .chat-instruction {
            color: #059669;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 40px;
        }
        
        .integration-methods {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 40px 0;
            text-align: left;
        }
        
        .method-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #059669;
        }
        
        .method-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .method-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }
        
        .method-code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            overflow-x: auto;
            margin-bottom: 10px;
        }
        
        .method-button {
            background: #059669;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .method-button:hover {
            background: #047857;
        }
        
        .debug-info {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            text-align: left;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .current-method {
            background: #e7f3ff;
            border: 2px solid #3b82f6;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .current-method h3 {
            color: #3b82f6;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ‰ Alec ChatBot Widget Test</h1>
        <p class="subtitle">Testing All Integration Methods</p>
        <p class="chat-instruction">ðŸ’¬ Click the chat button in the bottom-right corner to test!</p>
        
        <div class="current-method">
            <h3>ðŸš€ Currently Active: Simple Integration</h3>
            <p>The widget is currently loaded using the simple integration method. You can test different methods below.</p>
        </div>
        
        <div class="integration-methods">
            <div class="method-card">
                <div class="method-title">1. Simple Integration</div>
                <div class="method-description">Basic integration with minimal configuration</div>
                <div class="method-code">
&lt;link rel="stylesheet" href="https://chat.alecasgari.com/widget.css"&gt;
&lt;script src="https://chat.alecasgari.com/widget.iife.js"&gt;&lt;/script&gt;
&lt;script&gt;
  new (window.AlecChatBot.default||window.AlecChatBot)({
    webhookUrl:'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a'
  }).init();
&lt;/script&gt;
                </div>
                <button class="method-button" onclick="testSimpleIntegration()">Test This Method</button>
            </div>
            
            <div class="method-card">
                <div class="method-title">2. One-liner Integration</div>
                <div class="method-description">Ultra-simple one-line integration</div>
                <div class="method-code">
&lt;link rel="stylesheet" href="https://chat.alecasgari.com/widget.css"&gt;
&lt;script src="https://chat.alecasgari.com/widget.iife.js" onload="new (window.AlecChatBot.default||window.AlecChatBot)({webhookUrl:'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a'}).init()"&gt;&lt;/script&gt;
                </div>
                <button class="method-button" onclick="testOnelinerIntegration()">Test This Method</button>
            </div>
            
            <div class="method-card">
                <div class="method-title">3. Advanced Integration</div>
                <div class="method-description">Full configuration with callbacks and analytics</div>
                <div class="method-code">
const chatbot = new (window.AlecChatBot.default||window.AlecChatBot)({
  webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
  theme: {
    primaryColor: '#3b82f6',
    position: 'bottom-right',
    title: 'Support Assistant',
    placeholder: 'How can I help you?'
  },
  features: {
    resizable: true,
    typingAnimation: true,
    connectionStatus: true,
    autoOpen: false
  },
  callbacks: {
    onMessage: (message) => console.log('Message:', message),
    onOpen: () => console.log('Chat opened'),
    onClose: () => console.log('Chat closed'),
    onError: (error) => console.error('Error:', error)
  }
});
chatbot.init();
                </div>
                <button class="method-button" onclick="testAdvancedIntegration()">Test This Method</button>
            </div>
            
            <div class="method-card">
                <div class="method-title">4. Custom Theme</div>
                <div class="method-description">Integration with custom colors and positioning</div>
                <div class="method-code">
const chatbot = new (window.AlecChatBot.default||window.AlecChatBot)({
  webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
  theme: {
    primaryColor: '#ff6b6b',
    position: 'bottom-left',
    title: 'Custom Assistant',
    placeholder: 'Ask me anything...'
  }
});
chatbot.init();
                </div>
                <button class="method-button" onclick="testCustomTheme()">Test This Method</button>
            </div>
            
            <div class="method-card">
                <div class="method-title">5. Auto-Open</div>
                <div class="method-description">Widget that opens automatically when page loads</div>
                <div class="method-code">
const chatbot = new (window.AlecChatBot.default||window.AlecChatBot)({
  webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
  features: {
    autoOpen: true
  }
});
chatbot.init();
                </div>
                <button class="method-button" onclick="testAutoOpen()">Test This Method</button>
            </div>
            
            <div class="method-card">
                <div class="method-title">6. Programmatic Control</div>
                <div class="method-description">Control the widget programmatically</div>
                <div class="method-code">
// Store reference
window.chatbotInstance = chatbot;

// Open programmatically
window.chatbotInstance.open();

// Send message programmatically
window.chatbotInstance.sendMessage('Hello!');
                </div>
                <button class="method-button" onclick="testProgrammaticControl()">Test This Method</button>
            </div>
        </div>
        
        <div class="debug-info">
            <h4>Debug Information:</h4>
            <div id="debug-status">
                <div class="status info">Loading widget script...</div>
            </div>
        </div>
    </div>

    <!-- Alec ChatBot Widget Script -->
    <script>
        // Debug function
        function addDebugMessage(message, type = 'info') {
            const debugDiv = document.getElementById('debug-status');
            const statusDiv = document.createElement('div');
            statusDiv.className = `status ${type}`;
            statusDiv.textContent = message;
            debugDiv.appendChild(statusDiv);
            console.log(`[DEBUG] ${message}`);
        }

        // Test functions for different integration methods
        function testSimpleIntegration() {
            addDebugMessage('Testing Simple Integration...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a'
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            addDebugMessage('Simple Integration loaded successfully!', 'success');
        }

        function testOnelinerIntegration() {
            addDebugMessage('Testing One-liner Integration...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            // Simulate one-liner approach
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a'
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            addDebugMessage('One-liner Integration loaded successfully!', 'success');
        }

        function testAdvancedIntegration() {
            addDebugMessage('Testing Advanced Integration...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
                theme: {
                    primaryColor: '#3b82f6',
                    position: 'bottom-right',
                    title: 'Support Assistant',
                    placeholder: 'How can I help you?'
                },
                features: {
                    resizable: true,
                    typingAnimation: true,
                    connectionStatus: true,
                    autoOpen: false
                },
                callbacks: {
                    onMessage: (message) => {
                        console.log('Message sent:', message);
                        addDebugMessage(`Message sent: ${message}`, 'info');
                    },
                    onOpen: () => {
                        console.log('Chat opened');
                        addDebugMessage('Chat opened', 'success');
                    },
                    onClose: () => {
                        console.log('Chat closed');
                        addDebugMessage('Chat closed', 'info');
                    },
                    onError: (error) => {
                        console.error('Chatbot error:', error);
                        addDebugMessage(`Error: ${error}`, 'error');
                    }
                }
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            addDebugMessage('Advanced Integration loaded successfully!', 'success');
        }

        function testCustomTheme() {
            addDebugMessage('Testing Custom Theme...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
                theme: {
                    primaryColor: '#ff6b6b',
                    position: 'bottom-left',
                    title: 'Custom Assistant',
                    placeholder: 'Ask me anything...'
                }
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            addDebugMessage('Custom Theme loaded successfully!', 'success');
        }

        function testAutoOpen() {
            addDebugMessage('Testing Auto-Open...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a',
                features: {
                    autoOpen: true
                }
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            addDebugMessage('Auto-Open loaded successfully!', 'success');
        }

        function testProgrammaticControl() {
            addDebugMessage('Testing Programmatic Control...', 'info');
            if (window.chatbotInstance) {
                window.chatbotInstance.destroy();
            }
            
            const chatbot = new (window.AlecChatBot.default || window.AlecChatBot)({
                webhookUrl: 'https://n8n.alecasgari.com/webhook/2531f7c2-f516-435e-9f56-9ed98b3d673a'
            });
            chatbot.init();
            window.chatbotInstance = chatbot;
            
            // Demonstrate programmatic control
            setTimeout(() => {
                addDebugMessage('Opening chat programmatically...', 'info');
                window.chatbotInstance.open();
            }, 1000);
            
            addDebugMessage('Programmatic Control loaded successfully!', 'success');
        }

        // Initialize chatbot on page load
        function initChatbot() {
            if (window.AlecChatBot) {
                addDebugMessage('AlecChatBot found in window object', 'success');
                console.log('AlecChatBot object:', window.AlecChatBot);
                
                try {
                    // Start with simple integration
                    testSimpleIntegration();
                    addDebugMessage('Default chatbot initialized successfully!', 'success');
                    
                } catch (error) {
                    addDebugMessage(`Error initializing chatbot: ${error.message}`, 'error');
                    console.error('Error details:', error);
                }
            } else {
                addDebugMessage('AlecChatBot not found in window object!', 'error');
            }
        }

        // Load widget script
        function loadWidget() {
            addDebugMessage('Loading widget script from production server...', 'info');
            
            const script = document.createElement('script');
            script.src = 'https://chat.alecasgari.com/widget.iife.js';
            script.onload = function() {
                addDebugMessage('Widget script loaded successfully', 'success');
                setTimeout(initChatbot, 100);
            };
            script.onerror = function() {
                addDebugMessage('Failed to load widget script', 'error');
            };
            document.head.appendChild(script);
        }

        // Start loading when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadWidget);
        } else {
            loadWidget();
        }
    </script>
</body>
</html>